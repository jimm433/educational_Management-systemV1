# 使用者指南

本指南詳細說明如何使用教師題庫管理系統的各項功能。

---

## 📋 目錄

1. [快速開始](#快速開始)
2. [題庫管理](#題庫管理)
3. [考試管理](#考試管理)
4. [AI 智能批改](#ai-智能批改)
5. [數據分析](#數據分析)
6. [匯入匯出](#匯入匯出)
7. [常見問題](#常見問題)

---

## 快速開始

### 首次登入

1. **開啟系統**
   - 在瀏覽器中開啟系統首頁
   - 網址通常是：`http://localhost:3000` 或您的部署網址

2. **選擇身份**
   - 點擊「👨‍🏫 教師」或「👨‍🎓 學生」按鈕
   - 選擇您的身份角色

3. **Google 登入**
   - 點擊「使用 Google 帳號登入」按鈕
   - 選擇您的 Google 帳戶
   - 授權應用程式存取

4. **完成登入**
   - 首次登入會自動建立帳戶
   - 系統會導向到對應的儀表板

### 導航說明

- **教師端**：
  - 題庫管理：管理所有題目
  - 考試管理：建立和管理考試
  - 批改頁面：批改學生作業
  - 數據分析：查看統計資料

- **學生端**：
  - 我的考試：查看可參加的考試
  - 我的成績：查看考試結果
  - 課程內容：查看課程資料

---

## 題庫管理

### 新增題目

#### 選擇題

1. **進入題庫管理頁面**
   - 點擊左側選單「題庫管理」
   - 或直接開啟：`teacher/question.html`

2. **點擊「新增題目」按鈕**
   - 右上角綠色按鈕

3. **填寫題目資訊**
   - **題目類型**：選擇「選擇題」
   - **題目內容**：輸入題目文字
   - **選項**：
     - 選項 A：輸入第一個選項
     - 選項 B：輸入第二個選項
     - 選項 C：輸入第三個選項
     - 選項 D：輸入第四個選項
   - **正確答案**：選擇正確的選項（A、B、C 或 D）
   - **科目**：選擇題目所屬科目
   - **難度**：選擇難度等級（簡單、中等、困難）
   - **標籤**：輸入相關標籤（用逗號分隔）

4. **儲存題目**
   - 點擊「儲存」按鈕
   - 題目會立即顯示在題庫列表中

#### 是非題

1. 選擇「是非題」類型
2. 輸入題目內容
3. 選擇正確答案（是/否）
4. 填寫其他資訊（科目、難度、標籤）
5. 儲存

#### 問答題

1. 選擇「問答題」類型
2. 輸入題目內容
3. 輸入參考答案（可選）
4. 填寫其他資訊
5. 儲存

### 編輯題目

1. **找到要編輯的題目**
   - 在題庫列表中搜尋或篩選
   - 點擊題目卡片

2. **點擊「編輯」按鈕**
   - 題目卡片右上角的編輯圖示

3. **修改內容**
   - 在彈出的編輯視窗中修改
   - 可以修改所有欄位

4. **儲存變更**
   - 點擊「儲存」按鈕

### 刪除題目

#### 單一刪除

1. 找到要刪除的題目
2. 點擊「刪除」按鈕（垃圾桶圖示）
3. 確認刪除

#### 批量刪除

1. **選擇多個題目**
   - 勾選題目左側的核取方塊
   - 或點擊「全選」按鈕

2. **執行批量刪除**
   - 點擊頂部的「批量刪除」按鈕
   - 確認刪除操作

### 搜尋和篩選

#### 關鍵字搜尋

1. 在頂部搜尋框輸入關鍵字
2. 系統會即時搜尋題目內容、標籤等
3. 結果會即時更新

#### 篩選功能

1. **按科目篩選**
   - 點擊「科目」下拉選單
   - 選擇要篩選的科目

2. **按難度篩選**
   - 點擊「難度」下拉選單
   - 選擇難度等級

3. **按類型篩選**
   - 點擊「類型」下拉選單
   - 選擇題目類型

4. **組合篩選**
   - 可以同時使用多個篩選條件
   - 系統會顯示符合所有條件的題目

### 複製題目

1. 找到要複製的題目
2. 點擊「複製」按鈕（複製圖示）
3. 系統會建立一個相同的題目
4. 可以編輯複製的題目進行修改

---

## 考試管理

### 建立新考試

1. **進入考試管理頁面**
   - 點擊左側選單「考試管理」
   - 或開啟：`teacher/exam.html`

2. **點擊「建立考試」按鈕**

3. **填寫考試基本資訊**
   - **考試名稱**：輸入考試名稱
   - **考試說明**：輸入考試說明（可選）
   - **考試時間**：設定考試開始和結束時間
   - **考試時長**：設定考試時間限制（分鐘）

4. **選擇題目**
   - **方式 1：從題庫選擇**
     - 點擊「從題庫選題」按鈕
     - 使用篩選功能找到需要的題目
     - 勾選要加入的題目
     - 點擊「加入考試」
   - **方式 2：標籤篩選**
     - 使用標籤快速篩選題目
     - 選擇標籤後，相關題目會自動顯示
     - 勾選需要的題目

5. **設定題目順序**
   - 拖曳題目可以調整順序
   - 或使用上下箭頭按鈕

6. **設定分數**
   - 為每題設定分數
   - 或使用「統一設定」功能

7. **儲存考試**
   - 點擊「儲存」按鈕
   - 考試會儲存為草稿

### 發布考試

1. **編輯考試**
   - 在考試列表中點擊要發布的考試

2. **檢查設定**
   - 確認所有設定正確
   - 確認題目都已選擇

3. **發布考試**
   - 點擊「發布考試」按鈕
   - 確認發布操作
   - 發布後，學生可以看到並參加考試

### 編輯考試

1. 在考試列表中找到要編輯的考試
2. 點擊「編輯」按鈕
3. 修改考試內容
4. 儲存變更

**注意**：已發布的考試修改後需要重新發布。

### 查看考試結果

1. 在考試列表中點擊考試
2. 進入「考試詳情」頁面
3. 查看「考試結果」區塊
4. 可以看到：
   - 參加人數
   - 平均分數
   - 各題答對率
   - 學生詳細成績

---

## AI 智能批改

### 使用 AI 批改功能

#### 前置準備

1. **確認 AI 功能已啟用**
   - 確認已設定 AI API 金鑰（見 [SETUP.md](SETUP.md)）
   - 確認 Firebase Functions 已部署

2. **準備作業**
   - 學生已提交作業
   - 作業內容已上傳到系統

#### 開始批改

1. **進入批改頁面**
   - 點擊左側選單「批改頁面」
   - 或開啟：`teacher/grading.html`

2. **選擇作業**
   - 在作業列表中選擇要批改的作業
   - 點擊作業卡片

3. **選擇評分提詞範本**
   - 系統提供多種科目範本：
     - 程式設計
     - 數學
     - 國文
     - 英文
     - 物理
     - 化學
   - 選擇最適合的範本
   - 或使用「自訂提詞」

4. **自訂評分提詞（可選）**
   - 點擊「自訂提詞」
   - 輸入您的評分標準
   - 例如：
     ```
     請根據以下標準批改：
     1. 邏輯正確性（40%）
     2. 程式碼品質（30%）
     3. 註解完整性（20%）
     4. 創意性（10%）
     ```

5. **開始 AI 批改**
   - 點擊「開始 AI 批改」按鈕
   - 系統會顯示批改進度
   - 批改過程可能需要 1-3 分鐘

6. **查看批改結果**
   - 批改完成後，會顯示：
     - GPT 評分和評語
     - Claude 評分和評語
     - 最終分數（兩者平均）
     - 逐題詳細評語

7. **調整分數（可選）**
   - 如果對 AI 評分不滿意
   - 可以手動調整分數
   - 可以修改評語

8. **儲存批改結果**
   - 點擊「儲存批改結果」按鈕
   - 結果會儲存到資料庫
   - 學生可以看到批改結果

### 批改模式說明

#### 雙 AI 代理人模式

系統使用兩個 AI 模型同時批改：
- **GPT-4**：OpenAI 的 GPT-4 模型
- **Claude Haiku 4.5**：Anthropic 的 Claude 模型

**優點**：
- 更客觀的評分（兩個 AI 的平均分）
- 更全面的評語（兩個 AI 的不同觀點）
- 減少單一 AI 的偏見

#### 共識機制

如果兩個 AI 評分差異過大：
- 系統會自動進入「共識回合」
- AI 會重新評估並調整分數
- 確保評分的一致性

### 批改進度追蹤

在批改過程中，您可以：
- 查看當前批改的題目
- 查看已完成的題目數量
- 查看預計剩餘時間
- 隨時取消批改

---

## 數據分析

### 查看統計資料

1. **進入數據分析頁面**
   - 點擊左側選單「數據分析」
   - 或開啟：`teacher/analytic.html`

2. **選擇分析範圍**
   - 選擇時間範圍
   - 選擇科目
   - 選擇考試或題目

3. **查看圖表**
   - **成績分布圖**：查看成績分布情況
   - **題目難度分析**：查看各題目的答對率
   - **學生表現趨勢**：查看學生表現變化
   - **科目統計**：查看各科目的統計資料

### 匯出報告

1. 在數據分析頁面
2. 點擊「匯出報告」按鈕
3. 選擇匯出格式（PDF、Excel、CSV）
4. 下載報告檔案

---

## 匯入匯出

### 匯出題目

#### 匯出全部題目

1. 進入題庫管理頁面
2. 點擊「匯出」按鈕
3. 選擇「匯出全部題目」
4. 選擇匯出格式（JSON、CSV、Excel）
5. 下載檔案

#### 匯出選中的題目

1. 勾選要匯出的題目
2. 點擊「匯出」按鈕
3. 選擇「匯出選中的題目」
4. 選擇格式並下載

#### 匯出篩選結果

1. 使用搜尋或篩選功能
2. 點擊「匯出」按鈕
3. 選擇「匯出當前結果」
4. 選擇格式並下載

### 匯入題目

1. **準備匯入檔案**
   - 格式：JSON、CSV 或 Excel
   - 確認檔案格式正確

2. **進入匯入頁面**
   - 在題庫管理頁面
   - 點擊「匯入」按鈕

3. **選擇檔案**
   - 點擊「選擇檔案」
   - 選擇要匯入的檔案

4. **預覽資料**
   - 系統會顯示預覽
   - 確認資料正確

5. **執行匯入**
   - 點擊「開始匯入」
   - 等待匯入完成
   - 查看匯入結果

#### 匯入檔案格式範例

**JSON 格式**：
```json
[
  {
    "type": "選擇題",
    "content": "以下哪個是正確的？",
    "options": {
      "A": "選項 A",
      "B": "選項 B",
      "C": "選項 C",
      "D": "選項 D"
    },
    "correctAnswer": "A",
    "subject": "數學",
    "difficulty": "中等",
    "tags": ["代數", "基礎"]
  }
]
```

**CSV 格式**：
```csv
類型,題目內容,選項A,選項B,選項C,選項D,正確答案,科目,難度,標籤
選擇題,以下哪個是正確的？,選項A,選項B,選項C,選項D,A,數學,中等,"代數,基礎"
```

---

## 常見問題

### Q1: 如何批量修改題目？

**A**: 目前系統不支援批量編輯，但您可以：
1. 匯出題目到 Excel
2. 在 Excel 中批量修改
3. 重新匯入

### Q2: AI 批改需要多久時間？

**A**: 
- 單一作業：約 1-3 分鐘
- 批量批改：每個作業約 1-3 分鐘
- 時間取決於：
  - 題目數量
  - 答案長度
  - API 回應速度

### Q3: 可以只使用一個 AI 模型嗎？

**A**: 目前系統設計為雙 AI 模式，不支援單一模型。這是為了確保評分的客觀性和準確性。

### Q4: 如何備份題庫？

**A**: 
1. 定期匯出題目（建議每週一次）
2. 備份匯出的檔案
3. 或使用 Firebase 的備份功能

### Q5: 學生看不到考試怎麼辦？

**A**: 檢查以下項目：
1. 考試是否已發布
2. 考試時間是否在有效範圍內
3. 學生是否已正確登入
4. 檢查 Firestore 規則設定

### Q6: AI 批改結果不準確怎麼辦？

**A**: 
1. 調整評分提詞，使其更明確
2. 手動調整分數和評語
3. 嘗試不同的科目範本
4. 檢查 API 金鑰是否有效

### Q7: 如何刪除大量題目？

**A**: 
1. 使用批量刪除功能
2. 或使用篩選功能找到要刪除的題目
3. 全選後執行批量刪除

### Q8: 匯入檔案格式錯誤怎麼辦？

**A**: 
1. 檢查檔案格式是否符合要求
2. 參考系統提供的範本
3. 確認編碼為 UTF-8
4. 檢查必填欄位是否都有值

---

## 進階功能

### 自訂評分提詞

您可以建立自己的評分提詞範本：

1. 在批改頁面點擊「自訂提詞」
2. 輸入您的評分標準
3. 儲存為範本（如果系統支援）
4. 下次可以直接使用

### 標籤管理

使用標籤可以更好地組織題目：

1. **建立標籤**
   - 在新增或編輯題目時輸入標籤
   - 用逗號分隔多個標籤

2. **使用標籤篩選**
   - 在題庫管理頁面使用標籤篩選
   - 在考試管理頁面使用標籤快速選題

3. **標籤建議**
   - 系統會記住您常用的標籤
   - 輸入時會自動建議

### 批量操作技巧

1. **快速選擇**
   - 使用「全選」按鈕選擇當前頁面所有題目
   - 使用篩選後再全選，可以選擇符合條件的題目

2. **批量編輯**
   - 匯出 → 編輯 → 匯入
   - 適合需要大量修改的情況

---

## 最佳實踐

### 題庫管理

1. **建立清晰的標籤系統**
   - 使用一致的標籤命名
   - 建立標籤分類（例如：章節、主題、難度）

2. **定期整理題庫**
   - 刪除過時或錯誤的題目
   - 更新題目內容
   - 檢查題目難度設定

3. **建立題目範本**
   - 為常用題型建立範本
   - 可以快速建立相似題目

### 考試管理

1. **提前準備**
   - 提前建立考試
   - 預留時間檢查和調整

2. **測試考試**
   - 發布前先自己測試一次
   - 確認所有設定正確

3. **設定合理的時間**
   - 根據題目數量和難度設定時間
   - 考慮學生的實際情況

### AI 批改

1. **優化評分提詞**
   - 明確的評分標準
   - 具體的評分項目
   - 清晰的權重分配

2. **定期檢查結果**
   - 抽查 AI 批改結果
   - 根據結果調整提詞

3. **結合手動調整**
   - AI 批改後進行人工檢查
   - 對特殊情況進行手動調整

---

## 需要幫助？

如果遇到問題：

1. 查看本指南的 [常見問題](#常見問題) 章節
2. 查看 [SETUP.md](SETUP.md) 的疑難排解章節
3. 搜尋 [GitHub Issues](https://github.com/your-username/teacher-question-bank-system/issues)
4. 建立新的 Issue 描述問題

---

**最後更新**：2024-12-XX  
**版本**：2.0

